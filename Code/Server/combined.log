{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T07:37:17.438Z"}
{"error":"logger is not defined","level":"error","message":"Error getting filter options","stack":"ReferenceError: logger is not defined\n    at DbService.getFilterOptions (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:348:7)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:161:34\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:91:12)","timestamp":"2024-10-04T07:37:17.447Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T07:37:17.629Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T07:37:17.631Z"}
{"error":"logger is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: logger is not defined\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:281:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T07:37:17.633Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T07:41:13.693Z"}
{"error":"logger is not defined","level":"error","message":"Error getting filter options","stack":"ReferenceError: logger is not defined\n    at DbService.getFilterOptions (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:349:7)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:161:34\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:91:12)","timestamp":"2024-10-04T07:41:13.700Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T07:41:14.181Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T07:41:14.183Z"}
{"error":"logger is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: logger is not defined\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:282:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T07:41:14.185Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T07:41:56.657Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T07:41:56.661Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error getting filter options","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.getFilterOptions (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:341:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:161:34\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:41:56.665Z"}
{"error":{},"level":"error","message":"Error retrieving filter options","timestamp":"2024-10-04T07:41:56.663Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T07:41:57.070Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:211:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:33\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:41:57.072Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T07:41:57.071Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:211:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:33\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:41:57.074Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T07:43:33.996Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T07:43:34.005Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error getting filter options","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.getFilterOptions (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:341:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:161:34\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:43:34.009Z"}
{"error":{},"level":"error","message":"Error retrieving filter options","timestamp":"2024-10-04T07:43:34.008Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T07:43:34.619Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:211:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:33\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:43:34.621Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T07:43:34.620Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:211:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:33\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:43:34.623Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T07:45:40.023Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T07:45:40.032Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error getting filter options","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.getFilterOptions (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:341:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:161:34\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:45:40.040Z"}
{"error":{},"level":"error","message":"Error retrieving filter options","timestamp":"2024-10-04T07:45:40.036Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T07:45:40.738Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:211:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:33\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:45:40.740Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T07:45:40.739Z"}
{"error":"Cannot read properties of undefined (reading 'getConnection')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'getConnection')\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:377:17\n    at new Promise (<anonymous>)\n    at DbService.getConnection (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:376:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:211:25)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:33\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2024-10-04T07:45:40.742Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:04:28.291Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:04:28.295Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:04:28.299Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:04:28.300Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:04:28.308Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:04:28.310Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:04:28.315Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:04:28.317Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":0,"timestamp":"2024-10-04T08:04:28.320Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:04:28.322Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":0,"siteCount":2,"timestamp":"2024-10-04T08:04:28.321Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:04:29.289Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:04:29.290Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:04:29.292Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:04:29.292Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:04:29.293Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:04:29.294Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:04:29.301Z"}
{"error":"Cannot read properties of undefined (reading 'reduce')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'reduce')\n    at DbService.groupByEmployeeAndDate (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:555:20)\n    at DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:476:28)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:04:29.309Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:04:29.302Z"}
{"error":"Cannot read properties of undefined (reading 'reduce')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'reduce')\n    at DbService.groupByEmployeeAndDate (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:555:20)\n    at DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:476:28)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:04:29.306Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:04:29.309Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:11:59.270Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:11:59.274Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:11:59.282Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:11:59.285Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:11:59.291Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:11:59.295Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:11:59.315Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:11:59.301Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:11:59.303Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:11:59.311Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:11:59.313Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:12:00.382Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:12:00.384Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:12:00.386Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:12:00.387Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:12:00.387Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:12:00.389Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:12:00.403Z"}
{"error":"Cannot read properties of undefined (reading 'reduce')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'reduce')\n    at DbService.groupByEmployeeAndDate (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:555:20)\n    at DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:476:28)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:12:00.416Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:12:00.405Z"}
{"error":"Cannot read properties of undefined (reading 'reduce')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'reduce')\n    at DbService.groupByEmployeeAndDate (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:555:20)\n    at DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:476:28)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:12:00.413Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:12:00.415Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:19:01.832Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:19:01.837Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:19:01.840Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:19:01.841Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:19:01.845Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:19:01.847Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:19:01.849Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:19:01.850Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:19:01.854Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:19:01.852Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:19:01.853Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:19:03.126Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:19:03.127Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:19:03.129Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:19:03.129Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:19:03.130Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:19:03.131Z","values":[]}
{"error":"Cannot read properties of undefined (reading 'jobTitleId')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'jobTitleId')\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:641:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:564:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:19:03.204Z"}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:19:03.138Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:19:03.139Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:19:03.140Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:19:03.141Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:19:03.145Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:19:03.151Z"}
{"error":"Cannot read properties of undefined (reading 'jobTitleId')","level":"error","message":"Error in processAttendanceData","stack":"TypeError: Cannot read properties of undefined (reading 'jobTitleId')\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:641:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:564:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:19:03.195Z"}
{"error":"Cannot read properties of undefined (reading 'jobTitleId')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'jobTitleId')\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:641:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:564:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:19:03.197Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:19:03.199Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:26:24.142Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:26:24.148Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:26:24.159Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:26:24.162Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:26:24.170Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:26:24.173Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:26:24.175Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:26:24.176Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:26:24.181Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:26:24.179Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:26:24.180Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:26:25.257Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:26:25.258Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:26:25.260Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:26:25.261Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:26:25.261Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:26:25.262Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:26:25.273Z"}
{"error":"Cannot read properties of undefined (reading 'jobTitleId')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'jobTitleId')\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:641:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:564:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:26:25.324Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:26:25.276Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:26:25.284Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:26:25.287Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:26:25.291Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:26:25.294Z"}
{"error":"Cannot read properties of undefined (reading 'jobTitleId')","level":"error","message":"Error in processAttendanceData","stack":"TypeError: Cannot read properties of undefined (reading 'jobTitleId')\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:641:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:564:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:26:25.320Z"}
{"error":"Cannot read properties of undefined (reading 'jobTitleId')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'jobTitleId')\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:641:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:564:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:26:25.322Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:26:25.323Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:32:29.472Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:32:29.477Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:32:29.484Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:32:29.487Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:32:29.493Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:32:29.495Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:32:29.498Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:32:29.499Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:32:29.506Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:32:29.502Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:32:29.503Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:32:30.551Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:32:30.551Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:32:30.553Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:32:30.554Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:32:30.554Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:32:30.555Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:32:30.585Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:652:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:573:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:32:30.628Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:32:30.587Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:32:30.588Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:32:30.590Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:32:30.592Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:32:30.594Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error in processAttendanceData","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:652:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:573:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:32:30.622Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:652:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:573:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:32:30.624Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:32:30.626Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:33:37.765Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:33:37.770Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:33:37.775Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:33:37.776Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:33:37.783Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:33:37.785Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:33:37.791Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:33:37.794Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:33:37.806Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:33:37.800Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:33:37.803Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:33:38.797Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:33:38.798Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:33:38.800Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:33:38.806Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:33:38.807Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n      ","timestamp":"2024-10-04T08:33:38.810Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:33:38.820Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:654:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:575:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:33:38.860Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:33:38.823Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:33:38.825Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:33:38.826Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:33:38.832Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:33:38.833Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error in processAttendanceData","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:654:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:575:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:33:38.854Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:654:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:575:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:296:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:33:38.857Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:33:38.859Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:35:18.817Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:35:18.822Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:35:18.828Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:35:18.829Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:35:18.833Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:35:18.835Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:35:18.839Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:35:18.841Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:35:18.843Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:35:18.848Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:35:18.846Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:35:19.870Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:35:19.870Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:35:19.872Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:35:19.874Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:35:19.874Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:35:19.880Z","values":[]}
{"error":"jobtitle is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:656:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:577:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:35:19.943Z"}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:35:19.888Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:35:19.893Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:35:19.895Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:35:19.898Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:35:19.901Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:35:19.903Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error in processAttendanceData","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:656:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:577:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:35:19.935Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:656:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:577:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:35:19.937Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:35:19.938Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:36:25.824Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:36:25.829Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:36:25.839Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:36:25.841Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:36:25.848Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:36:25.849Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:36:25.853Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:36:25.855Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:36:25.860Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:36:25.858Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:36:25.859Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:36:26.889Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:36:26.890Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:36:26.893Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:36:26.893Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:36:26.894Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:36:26.895Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:36:26.914Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:656:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:577:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:36:26.990Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:36:26.916Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:36:26.918Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:36:26.919Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:36:26.921Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:36:26.922Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error in processAttendanceData","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:656:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:577:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:36:26.979Z"}
{"error":"jobtitle is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: jobtitle is not defined\n    at DbService.processEmployeeAttendance (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:656:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:577:40)\n    at async DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:29)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\App.js:198:24","timestamp":"2024-10-04T08:36:26.986Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:36:26.989Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:41:35.018Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:41:35.022Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:41:35.027Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:41:35.029Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:41:35.037Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:41:35.038Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:41:35.043Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:41:35.044Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:41:35.053Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:41:35.047Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:41:35.050Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:41:36.167Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:41:36.167Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:41:36.169Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:41:36.170Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:41:36.170Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:41:36.172Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:41:36.211Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:41:36.213Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:41:36.214Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:41:36.217Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:41:36.219Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:41:36.221Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T08:41:36.288Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T08:41:36.289Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.290Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.291Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.292Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.293Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.294Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.294Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.295Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.295Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.296Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.296Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.296Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.297Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.297Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.298Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.298Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.299Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.299Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.300Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.300Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.301Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.302Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.303Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.303Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.303Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.304Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.304Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.304Z","values":[{"awh":"NaN","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.305Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.305Z","values":[{"awh":"NaN","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.306Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.306Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.309Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.310Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.311Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.312Z","values":[{"awh":"NaN","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.313Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.314Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:41:36.315Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:41:36.316Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:36.400Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:36.402Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:36.403Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:36.403Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:36.534Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:36.645Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:36.854Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:36.945Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:37.165Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:37.166Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:37.278Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T08:41:37.280Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:37.279Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:41:37.279Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T08:41:37.280Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:41:37.280Z"}
{"level":"info","message":"Received attendance report request","query":{"nationality":"1"},"timestamp":"2024-10-04T08:42:27.578Z"}
{"filters":{"nationality":"1"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:42:27.580Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:42:27.581Z"}
{"filters":{"nationality":"1"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:42:27.581Z"}
{"level":"debug","message":"Executing main query","parameters":["1"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.NationalityID = ?","timestamp":"2024-10-04T08:42:27.582Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.NationalityID = ?","timestamp":"2024-10-04T08:42:27.582Z","values":["1"]}
{"level":"debug","message":"Query executed successfully","rowCount":7,"timestamp":"2024-10-04T08:42:27.587Z"}
{"level":"info","message":"Query executed successfully","rowCount":7,"timestamp":"2024-10-04T08:42:27.587Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":7,"timestamp":"2024-10-04T08:42:27.588Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:42:27.588Z","totalRecords":7}
{"inputDataLength":7,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:42:27.589Z"}
{"employeeCount":3,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:42:27.589Z"}
{"level":"info","message":"Data processing completed","processedRecords":7,"timestamp":"2024-10-04T08:42:27.628Z"}
{"level":"debug","message":"Data processing completed","processedRecords":7,"timestamp":"2024-10-04T08:42:27.628Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.628Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.629Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.629Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.629Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.629Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.630Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.630Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:42:27.630Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.630Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:42:27.631Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.631Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:42:27.632Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.632Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:42:27.633Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.633Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:42:27.634Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.635Z","values":[{"awh":"NaN","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:42:27.635Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.636Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:42:27.638Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:42:27.638Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:42:27.639Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:42:27.640Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:42:27.641Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:42:27.641Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:42:27.642Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:42:27.643Z"}
{"level":"info","message":"Successfully generated report","recordCount":2,"timestamp":"2024-10-04T08:42:27.645Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:42:27.644Z"}
{"level":"info","message":"Report generation completed","reportSize":2,"timestamp":"2024-10-04T08:42:27.645Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:42:27.645Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:43:19.057Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:43:19.060Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:43:19.063Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:43:19.064Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:43:19.067Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:43:19.068Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:43:19.069Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:43:19.069Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:43:19.071Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:43:19.078Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:43:19.072Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:43:20.197Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:43:20.197Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:43:20.198Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:43:20.199Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:43:20.199Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:43:20.200Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:43:20.272Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:43:20.273Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:43:20.273Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:43:20.273Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:43:20.274Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:43:20.274Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T08:43:20.308Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T08:43:20.308Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.308Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.308Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.309Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.309Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.311Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.312Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.313Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.313Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.314Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.314Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.316Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.316Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.316Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.317Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.317Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.318Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.319Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.320Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.320Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.324Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.325Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.325Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.325Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.326Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.327Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.328Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.329Z","values":[{"awh":"NaN","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.331Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.333Z","values":[{"awh":"NaN","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.334Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.334Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.335Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.335Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.336Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.337Z","values":[{"awh":"NaN","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.339Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.339Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:20.340Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:20.340Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.340Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.341Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.341Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.342Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.342Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.344Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.344Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.345Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.347Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T08:43:20.350Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.348Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.348Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.349Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:20.349Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T08:43:20.350Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:43:20.350Z"}
{"level":"info","message":"Received attendance report request","query":{"nationality":"2"},"timestamp":"2024-10-04T08:43:28.440Z"}
{"filters":{"nationality":"2"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:43:28.441Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:43:28.442Z"}
{"filters":{"nationality":"2"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:43:28.442Z"}
{"level":"debug","message":"Executing main query","parameters":["2"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.NationalityID = ?","timestamp":"2024-10-04T08:43:28.443Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.NationalityID = ?","timestamp":"2024-10-04T08:43:28.443Z","values":["2"]}
{"level":"debug","message":"Query executed successfully","rowCount":6,"timestamp":"2024-10-04T08:43:28.556Z"}
{"level":"info","message":"Query executed successfully","rowCount":6,"timestamp":"2024-10-04T08:43:28.556Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":6,"timestamp":"2024-10-04T08:43:28.556Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"leo@messi.com","EmpFName":"leo","EmpID":7,"EmpLName":"messi","EmployeeGradeID":2,"IsLive":1,"NationalityID":2,"ShiftId":1,"Shift_id":1,"clock_in":"15:03:16","clock_out":"00:00:00","date":"2024-09-30T20:00:00.000Z","depId":2,"depName":"second dep","empid":7,"hours_allowed_for_break":1,"jobTitle":4,"lgt_in_minutes":0,"sectionId":2,"sectionName":"second_section","section_Id":2,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":2,"siteName":"second","site_Id":2,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:43:28.557Z","totalRecords":6}
{"inputDataLength":6,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:43:28.558Z"}
{"employeeCount":4,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:43:28.558Z"}
{"level":"info","message":"Data processing completed","processedRecords":6,"timestamp":"2024-10-04T08:43:28.564Z"}
{"level":"debug","message":"Data processing completed","processedRecords":6,"timestamp":"2024-10-04T08:43:28.564Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.564Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.565Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.565Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.565Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.565Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.566Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:28.566Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.566Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:28.567Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.567Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:28.568Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.568Z","values":[{"awh":"NaN","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:28.568Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.568Z","values":[{"awh":"NaN","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:28.569Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.569Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:28.569Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:28.570Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:28.570Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:28.570Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:28.572Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T08:43:28.573Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:28.572Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:28.572Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:28.573Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T08:43:28.573Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:43:28.573Z"}
{"level":"info","message":"Received attendance report request","query":{"empId":"1","nationality":"2"},"timestamp":"2024-10-04T08:43:38.040Z"}
{"filters":{"empId":"1","nationality":"2"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:43:38.040Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:43:38.042Z"}
{"filters":{"empId":"1","nationality":"2"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:43:38.042Z"}
{"level":"debug","message":"Executing main query","parameters":["1","2"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.EmpID = ? AND e.NationalityID = ?","timestamp":"2024-10-04T08:43:38.043Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.EmpID = ? AND e.NationalityID = ?","timestamp":"2024-10-04T08:43:38.044Z","values":["1","2"]}
{"level":"debug","message":"Query executed successfully","rowCount":0,"timestamp":"2024-10-04T08:43:38.045Z"}
{"level":"info","message":"Successfully generated report","recordCount":0,"timestamp":"2024-10-04T08:43:38.048Z"}
{"level":"info","message":"Query executed successfully","rowCount":0,"timestamp":"2024-10-04T08:43:38.046Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":0,"timestamp":"2024-10-04T08:43:38.046Z"}
{"level":"debug","message":"Input data before grouping","timestamp":"2024-10-04T08:43:38.046Z","totalRecords":0}
{"inputDataLength":0,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:43:38.046Z"}
{"employeeCount":0,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:43:38.047Z"}
{"level":"info","message":"Data processing completed","processedRecords":0,"timestamp":"2024-10-04T08:43:38.047Z"}
{"level":"debug","message":"Data processing completed","processedRecords":0,"timestamp":"2024-10-04T08:43:38.047Z"}
{"level":"info","message":"Report generation completed","reportSize":0,"timestamp":"2024-10-04T08:43:38.048Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:43:38.048Z"}
{"level":"info","message":"Received attendance report request","query":{"empId":"2","nationality":"2"},"timestamp":"2024-10-04T08:43:42.168Z"}
{"filters":{"empId":"2","nationality":"2"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:43:42.169Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:43:42.169Z"}
{"filters":{"empId":"2","nationality":"2"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:43:42.169Z"}
{"level":"debug","message":"Executing main query","parameters":["2","2"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.EmpID = ? AND e.NationalityID = ?","timestamp":"2024-10-04T08:43:42.170Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.EmpID = ? AND e.NationalityID = ?","timestamp":"2024-10-04T08:43:42.170Z","values":["2","2"]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:43:42.173Z"}
{"level":"info","message":"Successfully generated report","recordCount":1,"timestamp":"2024-10-04T08:43:42.188Z"}
{"level":"info","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:43:42.174Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":2,"timestamp":"2024-10-04T08:43:42.175Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"nicole@white.com","EmpFName":"nicole","EmpID":2,"EmpLName":"brown","EmployeeGradeID":1,"IsLive":0,"NationalityID":2,"ShiftId":2,"Shift_id":2,"clock_in":"11:47:10","clock_out":"18:48:02","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":2,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"18:00:00","shift_incharge":2,"shift_name":"F2-workers","shift_start":"06:00:00","shift_type":"other day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:43:42.175Z","totalRecords":2}
{"inputDataLength":2,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:43:42.176Z"}
{"employeeCount":1,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:43:42.176Z"}
{"level":"info","message":"Data processing completed","processedRecords":2,"timestamp":"2024-10-04T08:43:42.180Z"}
{"level":"debug","message":"Data processing completed","processedRecords":2,"timestamp":"2024-10-04T08:43:42.181Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:42.182Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:42.183Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:42.183Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:42.184Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:42.185Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:42.185Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:42.186Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:42.186Z"}
{"level":"info","message":"Report generation completed","reportSize":1,"timestamp":"2024-10-04T08:43:42.187Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:43:42.188Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:43:52.195Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:43:52.195Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:43:52.196Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:43:52.196Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:43:52.196Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:43:52.197Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:43:52.200Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:43:52.201Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:43:52.201Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:43:52.201Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:43:52.202Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:43:52.202Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T08:43:52.226Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T08:43:52.226Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.227Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.228Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.228Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.228Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.229Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.229Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.230Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.230Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.230Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.230Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.231Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.231Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.231Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.231Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.232Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.232Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.232Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.233Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.233Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.234Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.235Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.235Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.235Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.236Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.236Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.236Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.237Z","values":[{"awh":"NaN","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.237Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.237Z","values":[{"awh":"NaN","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.238Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.238Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.239Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.239Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.241Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.241Z","values":[{"awh":"NaN","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.242Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.242Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:43:52.243Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:43:52.243Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.244Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.244Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.245Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.245Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.246Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.247Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.249Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T08:43:52.252Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.250Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.250Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.251Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.251Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.251Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:43:52.252Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T08:43:52.252Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:43:52.252Z"}
{"level":"info","message":"Received attendance report request","query":{"dateFrom":"2024-09-26","dateTo":"2024-10-01"},"timestamp":"2024-10-04T08:44:11.676Z"}
{"filters":{"dateFrom":"2024-09-26","dateTo":"2024-10-01"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:44:11.676Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:44:11.677Z"}
{"filters":{"dateFrom":"2024-09-26","dateTo":"2024-10-01"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:44:11.678Z"}
{"level":"debug","message":"Executing main query","parameters":["2024-09-26","2024-10-01"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE i.date BETWEEN ? AND ?","timestamp":"2024-10-04T08:44:11.678Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE i.date BETWEEN ? AND ?","timestamp":"2024-10-04T08:44:11.679Z","values":["2024-09-26","2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":9,"timestamp":"2024-10-04T08:44:11.683Z"}
{"level":"info","message":"Query executed successfully","rowCount":9,"timestamp":"2024-10-04T08:44:11.684Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":9,"timestamp":"2024-10-04T08:44:11.684Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:44:11.685Z","totalRecords":9}
{"inputDataLength":9,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:44:11.687Z"}
{"employeeCount":6,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:44:11.688Z"}
{"level":"info","message":"Data processing completed","processedRecords":9,"timestamp":"2024-10-04T08:44:11.713Z"}
{"level":"debug","message":"Data processing completed","processedRecords":9,"timestamp":"2024-10-04T08:44:11.713Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.713Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.713Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.714Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.714Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.714Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.714Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.715Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.715Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.715Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.716Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.717Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.717Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.718Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.718Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.718Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.719Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.719Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.720Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.722Z","values":[{"awh":"NaN","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.724Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.725Z","values":[{"awh":"NaN","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.726Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.726Z","values":[{"awh":"NaN","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.727Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.727Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:11.728Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:11.729Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.729Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.730Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.731Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.732Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.732Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.733Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.734Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T08:44:11.737Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.735Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:11.735Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T08:44:11.736Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:44:11.737Z"}
{"level":"info","message":"Received attendance report request","query":{"dateFrom":"2024-10-01","dateTo":"2024-10-04"},"timestamp":"2024-10-04T08:44:25.584Z"}
{"filters":{"dateFrom":"2024-10-01","dateTo":"2024-10-04"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:44:25.585Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:44:25.586Z"}
{"filters":{"dateFrom":"2024-10-01","dateTo":"2024-10-04"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:44:25.586Z"}
{"level":"debug","message":"Executing main query","parameters":["2024-10-01","2024-10-04"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE i.date BETWEEN ? AND ?","timestamp":"2024-10-04T08:44:25.586Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE i.date BETWEEN ? AND ?","timestamp":"2024-10-04T08:44:25.587Z","values":["2024-10-01","2024-10-04"]}
{"level":"debug","message":"Query executed successfully","rowCount":9,"timestamp":"2024-10-04T08:44:25.590Z"}
{"level":"info","message":"Query executed successfully","rowCount":9,"timestamp":"2024-10-04T08:44:25.591Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":9,"timestamp":"2024-10-04T08:44:25.591Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"15:03:16","clock_out":"15:06:39","date":"2024-09-30T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:44:25.592Z","totalRecords":9}
{"inputDataLength":9,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:44:25.592Z"}
{"employeeCount":6,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:44:25.593Z"}
{"level":"info","message":"Data processing completed","processedRecords":9,"timestamp":"2024-10-04T08:44:25.613Z"}
{"level":"debug","message":"Data processing completed","processedRecords":9,"timestamp":"2024-10-04T08:44:25.614Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.614Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.615Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.615Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.616Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.616Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.616Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.617Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.617Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.618Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.621Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.625Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.626Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.627Z","values":[{"awh":"NaN","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.627Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.628Z","values":[{"awh":"NaN","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.628Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.629Z","values":[{"awh":"NaN","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.629Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.629Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.630Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.630Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.630Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.631Z","values":[{"awh":"NaN","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.631Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.631Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:44:25.632Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:44:25.632Z","values":[{"awh":"NaN","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.632Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.633Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.633Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.633Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.634Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.634Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.634Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.635Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T08:44:25.638Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:44:25.636Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T08:44:25.637Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:44:25.638Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T08:54:00.726Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T08:54:00.732Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:54:00.740Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T08:54:00.744Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T08:54:00.749Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T08:54:00.751Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T08:54:00.761Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:54:00.754Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T08:54:00.755Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T08:54:00.758Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T08:54:00.760Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T08:54:01.555Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T08:54:01.555Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T08:54:01.557Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T08:54:01.558Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:54:01.558Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T08:54:01.559Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:54:01.567Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T08:54:01.568Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T08:54:01.569Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T08:54:01.570Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T08:54:01.573Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T08:54:01.576Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T08:54:01.652Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T08:54:01.652Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.653Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.653Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.654Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.654Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.654Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.655Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.655Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.655Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.656Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.656Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.657Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.658Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.658Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.659Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.660Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.665Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.666Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.667Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.668Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.669Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.669Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.670Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.670Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.671Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.671Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.673Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.674Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.674Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.675Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.675Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.675Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.676Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.677Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.680Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.680Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.681Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.681Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T08:54:01.682Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T08:54:01.682Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.755Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.756Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.757Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.758Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.789Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.811Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.834Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.855Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.900Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.901Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.922Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.923Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T08:54:01.925Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T08:54:01.924Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T08:54:01.925Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T08:54:01.925Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:01:33.903Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:01:33.913Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:01:33.919Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:01:33.922Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:01:33.931Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:01:33.932Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:01:33.937Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:01:33.938Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:01:33.942Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:01:33.940Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:01:33.941Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:01:34.657Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:01:34.659Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:01:34.661Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:01:34.662Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:01:34.663Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:01:34.664Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:01:34.671Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:01:34.671Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:01:34.672Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:01:34.673Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:01:34.674Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:01:34.675Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:01:34.776Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:01:34.780Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.783Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.790Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.791Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.792Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.793Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.794Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.796Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.797Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.798Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.814Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.826Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.827Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.828Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.829Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.830Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.838Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.841Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.843Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.844Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.846Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.847Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.853Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.856Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.858Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.859Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.862Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.864Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.866Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.868Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.873Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.874Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.876Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.877Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.879Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.880Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.882Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.883Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:01:34.887Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:01:34.888Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.889Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.890Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.891Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.892Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.892Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.895Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.896Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.897Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.898Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.899Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.901Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.905Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:01:34.906Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:01:34.908Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:01:34.908Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:01:34.908Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:03:11.546Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:03:11.556Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:03:11.561Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:03:11.564Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:03:11.568Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:03:11.569Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:03:11.571Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:03:11.572Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:03:11.576Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:03:11.574Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:03:11.575Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:03:11.992Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:03:11.993Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:03:11.995Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:03:11.996Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:03:11.997Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:03:11.999Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:03:12.005Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:03:12.006Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:03:12.007Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:03:12.008Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:03:12.010Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:03:12.011Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:03:12.086Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:03:12.087Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.088Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.092Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.093Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.093Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.093Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.094Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.094Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.095Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.095Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.097Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.098Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.099Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.101Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.103Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.108Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.111Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.112Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.114Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.118Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.123Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.125Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.127Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.131Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.133Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.134Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.136Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.141Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.145Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.152Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.157Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.158Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.161Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.162Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.164Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.166Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.168Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.168Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:03:12.169Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:03:12.170Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.176Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.177Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.178Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.179Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.185Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.186Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.189Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.192Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.194Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.195Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.196Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.196Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:03:12.198Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:03:12.197Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:03:12.198Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:03:12.198Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:07:57.832Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:07:57.841Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:07:57.848Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:07:57.854Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:07:57.861Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:07:57.862Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:07:57.871Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:07:57.873Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:07:57.883Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:07:57.877Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:07:57.879Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:07:58.944Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:07:58.944Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:07:58.946Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:07:58.946Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:07:58.946Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:07:58.947Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:07:58.953Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:07:58.954Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:07:58.955Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:07:58.956Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:07:58.958Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:07:58.960Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:07:59.060Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:07:59.060Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.060Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.061Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.061Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.061Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.062Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.062Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.062Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.063Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.063Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.063Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.064Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.064Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.064Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.065Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.067Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.071Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.073Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.074Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.074Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.075Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.075Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.076Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.077Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.078Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.078Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.079Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.080Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.080Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.081Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.081Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.082Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.082Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.083Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.086Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.086Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.087Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.088Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:07:59.088Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:07:59.089Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.089Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.089Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.090Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.090Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.091Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.092Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.092Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.093Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.093Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:07:59.096Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.094Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.095Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.095Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:07:59.095Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:07:59.096Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:07:59.096Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:09:01.998Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:09:02.003Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:09:02.011Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:09:02.013Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:09:02.017Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:09:02.019Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:09:02.023Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:09:02.025Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:09:02.032Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:09:02.028Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:09:02.030Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:09:03.105Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:09:03.107Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:09:03.110Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:09:03.111Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:09:03.113Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:09:03.114Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:09:03.126Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:09:03.128Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:09:03.130Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:09:03.131Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:09:03.132Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:09:03.133Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:09:03.180Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:09:03.181Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.181Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.182Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.182Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.182Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.183Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.183Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.183Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.184Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.184Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.184Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.184Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.185Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.185Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.186Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.186Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.187Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.187Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.188Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.188Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.189Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.189Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.190Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.190Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.190Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.191Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.191Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.195Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.197Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.198Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.198Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.199Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.199Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.200Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.200Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.201Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.202Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.203Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:09:03.205Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:09:03.206Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.207Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.207Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.208Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.208Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.210Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:09:03.215Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.210Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.211Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.211Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.212Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.212Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.213Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.213Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:09:03.213Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:09:03.215Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:09:03.215Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:11:35.948Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:11:35.953Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:11:35.957Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:11:35.958Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:11:35.960Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:11:35.961Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:11:35.963Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:11:35.963Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:11:35.964Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:11:35.968Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:11:35.967Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:11:37.057Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:11:37.058Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:11:37.060Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:11:37.060Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:11:37.061Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:11:37.063Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:11:37.070Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:11:37.071Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:11:37.073Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:11:37.075Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:11:37.084Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:11:37.087Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:11:37.194Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:11:37.194Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.195Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.196Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.196Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.196Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.197Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.197Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.197Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.198Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.198Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.198Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.198Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.199Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.199Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.200Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.200Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.201Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.201Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.202Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.203Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.203Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.203Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.204Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.204Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.208Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.209Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.211Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.211Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.212Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.212Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.213Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.213Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.214Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.214Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.215Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.215Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.215Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.216Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:11:37.219Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:11:37.219Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.220Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.220Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.221Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.221Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.222Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.226Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.227Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.228Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:11:37.238Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.228Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.229Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.230Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.231Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:11:37.231Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:11:37.237Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:11:37.237Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:12:35.173Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:12:35.177Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:12:35.183Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:12:35.184Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:12:35.189Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:12:35.192Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:12:35.206Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:12:35.208Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:12:35.213Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:12:35.211Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:12:35.212Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:12:36.449Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:12:36.450Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:12:36.452Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:12:36.452Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:12:36.453Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:12:36.455Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:12:36.461Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:12:36.462Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:12:36.464Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:12:36.466Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:12:36.467Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:12:36.469Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:12:36.674Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:12:36.674Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.677Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.678Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.679Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.679Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.682Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.684Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.686Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.687Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.687Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.688Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.689Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.689Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.690Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.690Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.691Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.692Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.693Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.695Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.696Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.704Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.707Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.708Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.709Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.712Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.716Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.718Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.721Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.723Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.723Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.729Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.729Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.739Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.740Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.743Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.745Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.752Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.753Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:12:36.755Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:12:36.756Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.758Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.759Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.760Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.762Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.763Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.768Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.771Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.772Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.772Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.773Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.774Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:12:36.786Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.775Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:12:36.777Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:12:36.780Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:12:36.785Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:38:51.538Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:38:51.543Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:38:51.547Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:38:51.548Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:38:51.553Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:38:51.554Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:38:51.557Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:38:51.562Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:38:51.566Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:38:51.572Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:38:51.571Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:38:52.898Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:38:52.899Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:38:52.901Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:38:52.902Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:38:52.902Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:38:52.903Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:38:52.912Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:38:52.912Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:38:52.914Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:38:52.917Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:38:52.920Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:38:52.921Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:38:52.969Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:38:52.969Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.970Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.972Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.973Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.973Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.974Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.974Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.975Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.975Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.978Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.979Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.980Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.981Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.982Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.983Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.983Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.984Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.985Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.986Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.987Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.988Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.988Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.989Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.989Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.990Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.990Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.991Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.991Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.993Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.994Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.996Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.996Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.998Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.998Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:52.998Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:52.999Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:53.000Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:53.001Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:38:53.002Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:38:53.002Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.004Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.005Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.006Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.007Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.007Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:38:53.016Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.008Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.008Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.009Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.010Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.013Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.014Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.014Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:38:53.015Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:38:53.015Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:38:53.016Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:39:55.996Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:39:56.003Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:39:56.008Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:39:56.010Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:39:56.018Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:39:56.023Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:39:56.027Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:39:56.028Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:39:56.034Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:39:56.029Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:39:56.031Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:39:57.016Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:39:57.017Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:39:57.019Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:39:57.020Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:39:57.020Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:39:57.024Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:39:57.040Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:39:57.041Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:39:57.042Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:39:57.043Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:39:57.047Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:39:57.048Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:39:57.119Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:39:57.120Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.121Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.122Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.123Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.123Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.124Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.124Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.124Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.125Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.125Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.125Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.126Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.126Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.126Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.128Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.129Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.130Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.131Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.133Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.134Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.137Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.138Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.140Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.143Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.148Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.149Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.152Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.155Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.156Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.158Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.159Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.159Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.160Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.161Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.163Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.164Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.165Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.165Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:39:57.165Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:39:57.166Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.166Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.167Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.168Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.169Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.170Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.171Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.171Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.172Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:39:57.179Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.172Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.173Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.176Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.177Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:39:57.178Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:39:57.179Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:39:57.179Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:41:24.477Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:41:24.482Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:41:24.486Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:41:24.488Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:41:24.493Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:41:24.494Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:41:24.498Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:41:24.502Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:41:24.506Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:41:24.509Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:41:24.508Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:41:25.567Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:41:25.568Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:41:25.576Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:41:25.578Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:41:25.580Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:41:25.582Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:41:25.596Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:41:25.599Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:41:25.600Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:41:25.601Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:41:25.602Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:41:25.603Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:41:25.696Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:41:25.696Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.696Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.697Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.698Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.698Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.699Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.699Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.699Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.699Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.699Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.700Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.700Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.700Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.700Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.701Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.702Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.702Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.703Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.703Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.704Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.704Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.704Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.705Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.706Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.708Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.710Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.711Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.711Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.712Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.713Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.713Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.714Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.714Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.714Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.715Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.716Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.717Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.718Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:41:25.719Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:41:25.719Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.720Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.720Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.721Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.721Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.723Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.727Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:41:25.736Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.728Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.729Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.729Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.730Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.730Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.730Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:41:25.731Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:41:25.735Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:41:25.735Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:42:04.507Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:42:04.512Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:42:04.518Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:42:04.520Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:42:04.525Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:42:04.528Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:42:04.533Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:42:04.535Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:42:04.539Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:42:04.545Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:42:04.544Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:42:05.631Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:42:05.632Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:42:05.633Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:42:05.634Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:42:05.634Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:42:05.635Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:42:05.639Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:42:05.639Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:42:05.640Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:42:05.641Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:42:05.643Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:42:05.644Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:42:05.745Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:42:05.745Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.745Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.746Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.746Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.747Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.747Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.747Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.748Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.748Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.748Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.749Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.749Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.749Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.749Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.750Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.750Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.752Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.753Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.755Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.755Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.756Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.757Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.758Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.758Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.759Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.761Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.763Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.763Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.764Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.765Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.765Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.766Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.766Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.766Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.767Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.768Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.769Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.770Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:05.771Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:05.773Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.774Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.774Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.775Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.775Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.776Z"}
{"error":"Cannot read properties of undefined (reading '1')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading '1')\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:779:41)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:42:05.784Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.777Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.779Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.780Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.780Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.780Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.781Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.781Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:05.782Z"}
{"error":"Cannot read properties of undefined (reading '1')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading '1')\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:779:41)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:42:05.782Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:42:05.783Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:42:40.210Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:42:40.214Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:42:40.219Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:42:40.222Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:42:40.227Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:42:40.230Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:42:40.232Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:42:40.234Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:42:40.243Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:42:40.238Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:42:40.240Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:42:41.227Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:42:41.228Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:42:41.229Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:42:41.230Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:42:41.230Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:42:41.231Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:42:41.236Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:42:41.239Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:42:41.242Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:42:41.243Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:42:41.245Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:42:41.246Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:42:41.339Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:42:41.340Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.341Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.342Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.343Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.343Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.344Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.344Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.344Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.344Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.345Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.345Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.345Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.346Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.346Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.347Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.348Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.349Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.349Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.350Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.350Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.351Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.351Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.352Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.352Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.353Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.353Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.353Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.354Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.354Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.355Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.355Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.355Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.356Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.356Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.357Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.357Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.358Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.358Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:42:41.359Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:42:41.359Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.360Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.360Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.360Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.361Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.361Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.362Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.363Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.363Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.364Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.365Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.366Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.367Z"}
{"error":"Cannot read properties of undefined (reading 'departments')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'departments')\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:779:42)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:42:41.369Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:42:41.368Z"}
{"error":"Cannot read properties of undefined (reading 'departments')","level":"error","message":"Error generating attendance report","stack":"TypeError: Cannot read properties of undefined (reading 'departments')\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:779:42)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:42:41.369Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:42:41.369Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:43:59.435Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:43:59.440Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:43:59.455Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:43:59.456Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:43:59.460Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:43:59.461Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:43:59.464Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:43:59.466Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:43:59.472Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:43:59.470Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:43:59.471Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:44:00.399Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:44:00.404Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:44:00.411Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:44:00.411Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:44:00.412Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:44:00.413Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:44:00.421Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:44:00.423Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:44:00.425Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:44:00.427Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:44:00.430Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:44:00.431Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:44:00.505Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:44:00.506Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.507Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.508Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.508Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.509Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.509Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.509Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.510Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.510Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.510Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.510Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.510Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.511Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.511Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.511Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.512Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.513Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.514Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.514Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.515Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.515Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.516Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.516Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.517Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.517Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.518Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.518Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.519Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.520Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.521Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.522Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.523Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.523Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.524Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.524Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.524Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.525Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.525Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:44:00.526Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:44:00.526Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.527Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.528Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.529Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.529Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.530Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:44:00.548Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.530Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.531Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.531Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.531Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.532Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.532Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.533Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:44:00.533Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:44:00.548Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:44:00.548Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:47:18.373Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:47:18.378Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:47:18.381Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:47:18.383Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:47:18.389Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:47:18.395Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:47:18.398Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:47:18.401Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:47:18.405Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:47:18.408Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:47:18.406Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:47:19.380Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:47:19.381Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:47:19.383Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:47:19.384Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:47:19.384Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:47:19.385Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:47:19.390Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:47:19.391Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:47:19.392Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:47:19.393Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:47:19.394Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:47:19.395Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:47:19.479Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:47:19.480Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.485Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.488Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.489Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.489Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.490Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.490Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.491Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.491Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.491Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.492Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.492Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.495Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.496Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.497Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.498Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.499Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.499Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.500Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.501Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.502Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.502Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.503Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.504Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.504Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.505Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.505Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.505Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.506Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.506Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.509Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.509Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.510Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.511Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.513Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.514Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.515Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.516Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:19.517Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:19.517Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.518Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.522Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.523Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.524Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.524Z"}
{"error":"emp_name is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: emp_name is not defined\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:768:23\n    at Array.forEach (<anonymous>)\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:730:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:47:19.531Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.525Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.525Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.525Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.526Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.527Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.527Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.527Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:19.528Z"}
{"error":"emp_name is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: emp_name is not defined\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:768:23\n    at Array.forEach (<anonymous>)\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:730:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:47:19.530Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:47:19.531Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:47:57.832Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:47:57.837Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:47:57.843Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:47:57.845Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:47:57.852Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:47:57.853Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:47:57.856Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:47:57.857Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:47:57.866Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:47:57.861Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:47:57.865Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:47:58.899Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:47:58.899Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:47:58.902Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:47:58.902Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:47:58.903Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:47:58.904Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:47:58.911Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:47:58.912Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:47:58.913Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:47:58.914Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:47:58.916Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:47:58.917Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:47:58.983Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:47:58.984Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.984Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.985Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.985Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.985Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.986Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.986Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.986Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.987Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.987Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.989Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.989Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.990Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.991Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:58.993Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.994Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:58.995Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.996Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:58.997Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:58.999Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.000Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.001Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.002Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.002Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.003Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.003Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.007Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.008Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.009Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.011Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.011Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.012Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.013Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.013Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.014Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.015Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.016Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.016Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:47:59.018Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:47:59.018Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.019Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.019Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.020Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.023Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.024Z"}
{"error":"emp_name is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: emp_name is not defined\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:768:29\n    at Array.forEach (<anonymous>)\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:730:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:47:59.029Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.024Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.025Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.025Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.026Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.026Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.026Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.027Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:47:59.027Z"}
{"error":"emp_name is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: emp_name is not defined\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:768:29\n    at Array.forEach (<anonymous>)\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:730:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:47:59.028Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:47:59.029Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:48:36.047Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:48:36.051Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:48:36.055Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:48:36.057Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:48:36.062Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:48:36.064Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:48:36.075Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:48:36.067Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:48:36.068Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:48:36.073Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:48:36.074Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:48:37.108Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:48:37.109Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:48:37.111Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:48:37.111Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:48:37.111Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:48:37.112Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:48:37.118Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:48:37.119Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:48:37.120Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:48:37.120Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:48:37.124Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:48:37.128Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:48:37.192Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:48:37.193Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.193Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.194Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.195Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.196Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.196Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.197Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.197Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.198Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.198Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.199Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.199Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.200Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.201Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.204Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.205Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.207Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.209Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.211Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.212Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.214Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.223Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.225Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.227Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.228Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.229Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.230Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.231Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.231Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.232Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.232Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.233Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.238Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.238Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.239Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.239Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.240Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.240Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:48:37.241Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:48:37.242Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.242Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.244Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.245Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.246Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.246Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.247Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.247Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.248Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.248Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.249Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.249Z"}
{"error":"grade is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: grade is not defined\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:768:27\n    at Array.forEach (<anonymous>)\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:730:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:48:37.257Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.252Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:48:37.254Z"}
{"error":"grade is not defined","level":"error","message":"Error generating attendance report","stack":"ReferenceError: grade is not defined\n    at D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:768:27\n    at Array.forEach (<anonymous>)\n    at DbService.organizeReportData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:730:10)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:307:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:48:37.256Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:48:37.257Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:48:58.959Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:48:58.964Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:48:58.968Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:48:58.969Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:48:58.972Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:48:58.973Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:48:58.978Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:48:58.978Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:48:58.992Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:48:58.986Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:48:58.989Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:49:00.124Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:49:00.126Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:49:00.131Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:49:00.132Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:49:00.133Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:49:00.134Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:49:00.165Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:49:00.168Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:49:00.172Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:49:00.174Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:49:00.176Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:49:00.177Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:49:00.241Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:49:00.241Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.242Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.243Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.243Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.244Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.244Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.244Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.245Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.245Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.246Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.250Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.251Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.251Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.252Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.253Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.254Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.256Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.256Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.258Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.259Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.262Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.267Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.269Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.270Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.271Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.272Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.272Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.273Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.273Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.274Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.276Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.276Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.278Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.279Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.282Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.283Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.283Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.284Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:49:00.285Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:49:00.285Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.286Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.286Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.287Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.287Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.288Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.289Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.290Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.290Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.291Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:49:00.312Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.292Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.293Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.293Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:49:00.294Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:49:00.311Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:49:00.311Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:50:09.583Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:50:09.590Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:50:09.595Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:50:09.597Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:50:09.604Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:50:09.605Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:50:09.607Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:50:09.609Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:50:09.614Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:50:09.612Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:50:09.613Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:50:10.680Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:50:10.681Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:50:10.683Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:50:10.684Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:50:10.686Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:50:10.690Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:50:10.701Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:50:10.703Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:50:10.704Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:50:10.706Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:50:10.709Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:50:10.711Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:50:10.795Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:50:10.795Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.796Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.798Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.799Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.800Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.800Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.800Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.801Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.801Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.801Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.802Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.802Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.802Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.802Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.803Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.804Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.805Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.806Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.806Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.807Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.807Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.808Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.808Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.809Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.810Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.811Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.812Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.813Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.813Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.814Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.815Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.816Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.817Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.818Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.819Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.819Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.820Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.820Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:50:10.821Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:50:10.822Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.823Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.823Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.824Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.824Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.825Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.826Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.827Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:50:10.841Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.828Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.829Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.829Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.831Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.831Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:50:10.832Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:50:10.840Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:50:10.840Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:51:54.269Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:51:54.273Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:51:54.277Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:51:54.279Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:51:54.284Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:51:54.285Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:51:54.287Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:51:54.289Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:51:54.292Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:51:54.295Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:51:54.293Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:51:55.435Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:51:55.436Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:51:55.437Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:51:55.438Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:51:55.438Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:51:55.439Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:51:55.445Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:51:55.446Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:51:55.447Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:51:55.448Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:51:55.449Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:51:55.451Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:51:55.538Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T09:51:55.538Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.538Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.540Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.541Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.542Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.542Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.543Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.543Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.543Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.544Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.544Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.544Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.545Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.545Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.545Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.546Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.547Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.548Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.548Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.549Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.549Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.550Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.551Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.551Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.552Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.552Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.553Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.553Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.554Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.554Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.554Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.555Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.555Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.556Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.558Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.559Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.560Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.561Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T09:51:55.562Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T09:51:55.562Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.564Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.565Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.566Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.568Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.570Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T09:51:55.588Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.570Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.571Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.571Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.572Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.572Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.574Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.575Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T09:51:55.576Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T09:51:55.587Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:51:55.587Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T09:54:40.416Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T09:54:40.419Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:54:40.424Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T09:54:40.425Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T09:54:40.432Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T09:54:40.434Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:54:40.438Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T09:54:40.441Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T09:54:40.445Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T09:54:40.444Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T09:54:40.445Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T09:54:41.126Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T09:54:41.127Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T09:54:41.129Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T09:54:41.130Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:54:41.130Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T09:54:41.131Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:54:41.139Z"}
{"error":"Cannot access 'grade' before initialization","level":"error","message":"Error generating attendance report","stack":"ReferenceError: Cannot access 'grade' before initialization\n    at DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:578:13)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:54:41.158Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T09:54:41.140Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T09:54:41.141Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T09:54:41.142Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T09:54:41.143Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T09:54:41.144Z"}
{"error":"Cannot access 'grade' before initialization","level":"error","message":"Error in processAttendanceData","stack":"ReferenceError: Cannot access 'grade' before initialization\n    at DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:578:13)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:54:41.151Z"}
{"error":"Cannot access 'grade' before initialization","level":"error","message":"Error generating attendance report","stack":"ReferenceError: Cannot access 'grade' before initialization\n    at DbService.processAttendanceData (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:578:13)\n    at DbService.generateAttendanceReport (D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\dbService.js:298:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async D:\\Mahmoud\\projects\\Biometric Attendance Project\\Code\\Server\\app.js:198:24","timestamp":"2024-10-04T09:54:41.156Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T09:54:41.157Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T10:00:50.639Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T10:00:50.646Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:00:50.650Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T10:00:50.652Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T10:00:50.656Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T10:00:50.657Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:00:50.663Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T10:00:50.665Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T10:00:50.670Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:00:50.667Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T10:00:50.669Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T10:00:51.714Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:00:51.715Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:00:51.718Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:00:51.719Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:00:51.720Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:00:51.721Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:00:51.754Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:00:51.758Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T10:00:51.796Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:00:51.796Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:00:51.797Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:00:51.798Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:00:51.871Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:00:51.873Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.875Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.877Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.877Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.878Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.878Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.878Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.879Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.879Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.879Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.879Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.880Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.880Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.880Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.881Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.882Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.883Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.883Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.884Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.884Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.885Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.885Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.885Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.886Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.886Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.887Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.888Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.888Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.889Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.890Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.891Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.891Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.891Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.892Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.892Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.892Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.893Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.894Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:00:51.894Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:00:51.894Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.895Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.895Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.896Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.896Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.896Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T10:00:51.910Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.897Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.898Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.898Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.898Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.899Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.899Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.899Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:00:51.899Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T10:00:51.909Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:00:51.909Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T10:02:09.612Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T10:02:09.620Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:02:09.626Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T10:02:09.630Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T10:02:09.635Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T10:02:09.637Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:02:09.639Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T10:02:09.640Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T10:02:09.645Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:02:09.642Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T10:02:09.643Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T10:02:10.684Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:02:10.684Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:02:10.686Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:02:10.686Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:02:10.686Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:02:10.687Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:02:10.695Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:02:10.697Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T10:02:10.734Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"hours_allowed_for_break":1,"jobTitle":1,"lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:02:10.735Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:02:10.739Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:02:10.740Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:02:10.848Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:02:10.848Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.849Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.849Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.850Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.850Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.850Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.851Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.851Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.851Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.851Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.852Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.852Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.852Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.852Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.853Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.854Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.855Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.855Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.856Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.857Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.858Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.858Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.859Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.859Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.860Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.862Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.863Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.863Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.864Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.864Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.865Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.865Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.865Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.866Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.866Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.866Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.867Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.867Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:02:10.868Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:02:10.868Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.869Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.870Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.870Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.870Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.871Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T10:02:10.886Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.871Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.872Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.872Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.872Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.873Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.874Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.874Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:02:10.875Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T10:02:10.885Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:02:10.885Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T10:10:52.711Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T10:10:52.717Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:10:52.722Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T10:10:52.723Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T10:10:52.728Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T10:10:52.729Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:10:52.731Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T10:10:52.732Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T10:10:52.737Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:10:52.734Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T10:10:52.736Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T10:10:53.776Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:10:53.777Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:10:53.779Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:10:53.780Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:10:53.781Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:10:53.784Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:10:53.822Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:10:53.823Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T10:10:53.873Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:10:53.873Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:10:53.874Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:10:53.875Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:10:53.923Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:10:53.923Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.923Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.924Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.924Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.924Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.925Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.925Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.926Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.928Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.929Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.930Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.930Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.931Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.931Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.932Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.932Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.933Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.933Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.934Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.934Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.935Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.935Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.936Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.936Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.937Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.938Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.939Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.939Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.940Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.940Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.940Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.941Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.942Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.943Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.946Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.946Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.947Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.947Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:10:53.948Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:10:53.948Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.949Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.949Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.950Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.951Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.951Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.952Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.952Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.952Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.953Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T10:10:53.968Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.954Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.955Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.955Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:10:53.956Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T10:10:53.968Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:10:53.968Z"}
{"level":"info","message":"Received attendance report request","query":{"nationality":"1"},"timestamp":"2024-10-04T10:11:23.662Z"}
{"filters":{"nationality":"1"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:11:23.663Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:11:23.664Z"}
{"filters":{"nationality":"1"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:11:23.664Z"}
{"level":"debug","message":"Executing main query","parameters":["1"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.NationalityID = ?","timestamp":"2024-10-04T10:11:23.664Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.NationalityID = ?","timestamp":"2024-10-04T10:11:23.665Z","values":["1"]}
{"level":"debug","message":"Query executed successfully","rowCount":7,"timestamp":"2024-10-04T10:11:23.669Z"}
{"level":"info","message":"Query executed successfully","rowCount":7,"timestamp":"2024-10-04T10:11:23.669Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":7,"timestamp":"2024-10-04T10:11:23.680Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:11:23.680Z","totalRecords":7}
{"inputDataLength":7,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:11:23.681Z"}
{"employeeCount":3,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:11:23.681Z"}
{"level":"info","message":"Data processing completed","processedRecords":7,"timestamp":"2024-10-04T10:11:23.705Z"}
{"level":"debug","message":"Data processing completed","processedRecords":7,"timestamp":"2024-10-04T10:11:23.705Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.706Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.706Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.707Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.707Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.708Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.708Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.709Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:23.710Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.710Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:23.711Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.712Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:23.712Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.713Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:23.713Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.714Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:23.715Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.715Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:23.716Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.716Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:23.717Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:23.717Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:23.718Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:23.718Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:23.719Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:23.720Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:23.720Z"}
{"level":"info","message":"Successfully generated report","recordCount":2,"timestamp":"2024-10-04T10:11:23.731Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:23.721Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:23.722Z"}
{"level":"info","message":"Report generation completed","reportSize":2,"timestamp":"2024-10-04T10:11:23.730Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:11:23.731Z"}
{"level":"info","message":"Received attendance report request","query":{"nationality":"2"},"timestamp":"2024-10-04T10:11:33.172Z"}
{"filters":{"nationality":"2"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:11:33.172Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:11:33.173Z"}
{"filters":{"nationality":"2"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:11:33.173Z"}
{"level":"debug","message":"Executing main query","parameters":["2"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.NationalityID = ?","timestamp":"2024-10-04T10:11:33.173Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE e.NationalityID = ?","timestamp":"2024-10-04T10:11:33.174Z","values":["2"]}
{"level":"debug","message":"Query executed successfully","rowCount":6,"timestamp":"2024-10-04T10:11:33.176Z"}
{"level":"info","message":"Query executed successfully","rowCount":6,"timestamp":"2024-10-04T10:11:33.176Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":6,"timestamp":"2024-10-04T10:11:33.189Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"leo@messi.com","EmpFName":"leo","EmpID":7,"EmpLName":"messi","EmployeeGradeID":2,"IsLive":1,"NationalityID":2,"ShiftId":1,"Shift_id":1,"clock_in":"15:03:16","clock_out":"00:00:00","date":"2024-09-30T20:00:00.000Z","depId":2,"depName":"second dep","empid":7,"gradeId":2,"gradeName":"Labour","hours_allowed_for_break":1,"jobTitle":4,"jobTitleId":4,"jobTitleName":"Labour","lgt_in_minutes":0,"sectionId":2,"sectionName":"second_section","section_Id":2,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":2,"siteName":"second","site_Id":2,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:11:33.190Z","totalRecords":6}
{"inputDataLength":6,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:11:33.190Z"}
{"employeeCount":4,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:11:33.191Z"}
{"level":"info","message":"Data processing completed","processedRecords":6,"timestamp":"2024-10-04T10:11:33.205Z"}
{"level":"debug","message":"Data processing completed","processedRecords":6,"timestamp":"2024-10-04T10:11:33.206Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.206Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.207Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.208Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.208Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.208Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.209Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:33.209Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.210Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:33.210Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.210Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:33.211Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.211Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:33.211Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.212Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:33.212Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.212Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:11:33.213Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:11:33.213Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:33.214Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:33.215Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:33.215Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T10:11:33.221Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:33.215Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:33.216Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:11:33.216Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T10:11:33.221Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:11:33.221Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T10:12:40.336Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T10:12:40.341Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:12:40.345Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T10:12:40.346Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T10:12:40.350Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T10:12:40.352Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:12:40.355Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T10:12:40.356Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T10:12:40.362Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:12:40.360Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T10:12:40.361Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T10:12:41.187Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:12:41.187Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:12:41.189Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:12:41.190Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:12:41.190Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:12:41.191Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:12:41.196Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:12:41.197Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T10:12:41.240Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:12:41.241Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:12:41.242Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:12:41.243Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:12:41.345Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:12:41.360Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.361Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.363Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.363Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.364Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.364Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.365Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.365Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.365Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.366Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.366Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.366Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.366Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.367Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.367Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.368Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.368Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.369Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.370Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.372Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.373Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.373Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.376Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.382Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.386Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.386Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.387Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.388Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.391Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.393Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.396Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.397Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.398Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.398Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.399Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.399Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.400Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.400Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:12:41.401Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:12:41.401Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.402Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.402Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.403Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.403Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.403Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.404Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T10:12:41.425Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.405Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.407Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.408Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.409Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.410Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.411Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:12:41.413Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T10:12:41.424Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:12:41.425Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T10:13:13.698Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T10:13:13.705Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:13:13.712Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T10:13:13.714Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T10:13:13.723Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T10:13:13.724Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:13:13.728Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T10:13:13.729Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T10:13:13.737Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T10:13:13.734Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T10:13:13.736Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T10:13:14.147Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:13:14.151Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:13:14.154Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:13:14.155Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:13:14.156Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:13:14.159Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:13:14.168Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:13:14.169Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T10:13:14.204Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:13:14.205Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:13:14.207Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:13:14.208Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:13:14.270Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:13:14.270Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.271Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.272Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.273Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.274Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.277Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.279Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.280Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.281Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.282Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.286Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.289Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.289Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.291Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.293Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.294Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.296Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.297Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.301Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.303Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.306Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.308Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.310Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.311Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.313Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.314Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.315Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.316Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.319Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.321Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.322Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.323Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.325Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.326Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.327Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.328Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.329Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.330Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:14.331Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:14.332Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.333Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.335Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.337Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.337Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.338Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.339Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.342Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.345Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.347Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.348Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.350Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T10:13:14.374Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.355Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:14.358Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T10:13:14.374Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:13:14.374Z"}
{"level":"info","message":"Received attendance report request","query":{"empName":"bob"},"timestamp":"2024-10-04T10:13:38.069Z"}
{"filters":{"empName":"bob"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:13:38.070Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:13:38.071Z"}
{"filters":{"empName":"bob"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:13:38.071Z"}
{"level":"debug","message":"Executing main query","parameters":["%bob%","%bob%"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE (e.EmpFName LIKE ? OR e.EmpLName LIKE ?)","timestamp":"2024-10-04T10:13:38.072Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE (e.EmpFName LIKE ? OR e.EmpLName LIKE ?)","timestamp":"2024-10-04T10:13:38.073Z","values":["%bob%","%bob%"]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T10:13:38.076Z"}
{"level":"info","message":"Successfully generated report","recordCount":1,"timestamp":"2024-10-04T10:13:38.102Z"}
{"level":"info","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T10:13:38.076Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":4,"timestamp":"2024-10-04T10:13:38.083Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:13:38.084Z","totalRecords":4}
{"inputDataLength":4,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:13:38.084Z"}
{"employeeCount":1,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:13:38.085Z"}
{"level":"info","message":"Data processing completed","processedRecords":4,"timestamp":"2024-10-04T10:13:38.093Z"}
{"level":"debug","message":"Data processing completed","processedRecords":4,"timestamp":"2024-10-04T10:13:38.093Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:38.093Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:38.093Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:38.093Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:38.094Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:38.094Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:38.094Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:38.095Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:38.095Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:38.095Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:38.096Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:38.096Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:38.096Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:38.097Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:38.097Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:38.098Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:38.098Z"}
{"level":"info","message":"Report generation completed","reportSize":1,"timestamp":"2024-10-04T10:13:38.101Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:13:38.101Z"}
{"level":"info","message":"Received attendance report request","query":{"empName":"b"},"timestamp":"2024-10-04T10:13:43.058Z"}
{"filters":{"empName":"b"},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:13:43.058Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:13:43.059Z"}
{"filters":{"empName":"b"},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:13:43.059Z"}
{"level":"debug","message":"Executing main query","parameters":["%b%","%b%"],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE (e.EmpFName LIKE ? OR e.EmpLName LIKE ?)","timestamp":"2024-10-04T10:13:43.060Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n       WHERE (e.EmpFName LIKE ? OR e.EmpLName LIKE ?)","timestamp":"2024-10-04T10:13:43.061Z","values":["%b%","%b%"]}
{"level":"debug","message":"Query executed successfully","rowCount":6,"timestamp":"2024-10-04T10:13:43.063Z"}
{"level":"info","message":"Query executed successfully","rowCount":6,"timestamp":"2024-10-04T10:13:43.063Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":6,"timestamp":"2024-10-04T10:13:43.076Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:13:43.077Z","totalRecords":6}
{"inputDataLength":6,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:13:43.077Z"}
{"employeeCount":2,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:13:43.077Z"}
{"level":"info","message":"Data processing completed","processedRecords":6,"timestamp":"2024-10-04T10:13:43.086Z"}
{"level":"debug","message":"Data processing completed","processedRecords":6,"timestamp":"2024-10-04T10:13:43.086Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.087Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.087Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.087Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.088Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.088Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.088Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:43.089Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.090Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:43.090Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.091Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:43.092Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.092Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:43.092Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.093Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:43.093Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.094Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:43.094Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:43.094Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:43.095Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:43.095Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:43.096Z"}
{"level":"info","message":"Successfully generated report","recordCount":2,"timestamp":"2024-10-04T10:13:43.101Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:43.096Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:43.097Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:43.097Z"}
{"level":"info","message":"Report generation completed","reportSize":2,"timestamp":"2024-10-04T10:13:43.101Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:13:43.101Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T10:13:49.683Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T10:13:49.683Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T10:13:49.684Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T10:13:49.685Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:13:49.685Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T10:13:49.686Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:13:49.691Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T10:13:49.691Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T10:13:49.723Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T10:13:49.723Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T10:13:49.724Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T10:13:49.725Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:13:49.761Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T10:13:49.761Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.761Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.762Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.762Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.762Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.762Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.763Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.763Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.763Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.763Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.764Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.764Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.764Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.764Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.765Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.765Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.766Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.766Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.766Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.766Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.767Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.767Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.768Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.768Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.768Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.769Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.770Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.771Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.771Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.772Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.772Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.773Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.773Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.773Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.774Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.774Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.775Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.775Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T10:13:49.776Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T10:13:49.777Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.778Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.780Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.781Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.783Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.784Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.784Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.786Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T10:13:49.800Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.786Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.787Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.787Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.788Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.788Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T10:13:49.789Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T10:13:49.800Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T10:13:49.800Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T11:18:37.276Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T11:18:37.279Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T11:18:37.303Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:18:37.284Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T11:18:37.285Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T11:18:37.289Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T11:18:37.290Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:18:37.298Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T11:18:37.299Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:18:37.301Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T11:18:37.302Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T11:18:38.178Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T11:18:38.179Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:18:38.180Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T11:18:38.181Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:18:38.181Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:18:38.183Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:18:38.202Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:18:38.203Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T11:18:38.245Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T11:18:38.246Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T11:18:38.248Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T11:18:38.250Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:18:38.309Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:18:38.309Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.310Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.311Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.311Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.311Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.311Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.312Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.312Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.312Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.313Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.313Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.313Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.314Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.314Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.315Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.315Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.316Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.317Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.317Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.318Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.318Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.318Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.319Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.319Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.319Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.320Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.320Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.321Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.321Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.321Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.322Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.322Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.323Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.323Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.323Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.324Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.324Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.324Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:18:38.325Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:18:38.325Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.326Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.326Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.327Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.327Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.327Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.328Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.329Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T11:18:38.344Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.330Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.331Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.331Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.332Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.332Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:18:38.333Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T11:18:38.343Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T11:18:38.344Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T11:20:17.194Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T11:20:17.197Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:20:17.200Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T11:20:17.202Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T11:20:17.205Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T11:20:17.206Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:20:17.210Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T11:20:17.211Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T11:20:17.215Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:20:17.212Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T11:20:17.213Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T11:20:17.429Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T11:20:17.432Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:20:17.435Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T11:20:17.435Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:20:17.436Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:20:17.437Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:20:17.443Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:20:17.445Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T11:20:17.495Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T11:20:17.496Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T11:20:17.498Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T11:20:17.502Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:20:17.575Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:20:17.575Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.576Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.578Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.578Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.579Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.579Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.580Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.580Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.580Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.581Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.581Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.581Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.582Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.582Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.583Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.584Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.586Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.586Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.586Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.587Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.587Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.588Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.588Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.588Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.589Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.589Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.590Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.590Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.590Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.591Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.592Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.593Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.594Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.594Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.596Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.596Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.597Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.598Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:20:17.599Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:20:17.601Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.602Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.603Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.603Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.604Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.604Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.605Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.605Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.606Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.606Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.606Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.606Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T11:20:17.618Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.607Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:20:17.607Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T11:20:17.618Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T11:20:17.618Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T11:22:29.137Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T11:22:29.142Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:22:29.145Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T11:22:29.146Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T11:22:29.152Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T11:22:29.153Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:22:29.156Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T11:22:29.158Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:22:29.161Z"}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T11:22:29.163Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T11:22:29.162Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T11:22:29.368Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T11:22:29.369Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:22:29.370Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T11:22:29.370Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:22:29.371Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:22:29.371Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:22:29.379Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:22:29.381Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T11:22:29.413Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T11:22:29.414Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T11:22:29.415Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T11:22:29.417Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:22:29.488Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:22:29.489Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.489Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.490Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.490Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.490Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.490Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.491Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.491Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.491Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.492Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.492Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.492Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.493Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.493Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.494Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.494Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.495Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.495Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.496Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.496Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.497Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.497Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.497Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.498Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.498Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.499Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.500Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.501Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.502Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.503Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.503Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.504Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.504Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.504Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.505Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.505Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.506Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.507Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:22:29.508Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:22:29.509Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.509Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.510Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.510Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.510Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.511Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T11:22:29.526Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.511Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.512Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.512Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.512Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.513Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.513Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.513Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:22:29.514Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T11:22:29.526Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T11:22:29.526Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T11:25:39.231Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T11:25:39.236Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:25:39.242Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T11:25:39.243Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T11:25:39.248Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T11:25:39.251Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:25:39.255Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T11:25:39.256Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T11:25:39.266Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:25:39.260Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T11:25:39.263Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T11:25:40.335Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T11:25:40.336Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:25:40.337Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T11:25:40.338Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:25:40.338Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:25:40.339Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:25:40.344Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:25:40.345Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T11:25:40.398Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T11:25:40.399Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T11:25:40.401Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T11:25:40.404Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:25:40.469Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:25:40.469Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.470Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.471Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.472Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.473Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.474Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.475Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.476Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.477Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.478Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.478Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.479Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.479Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.479Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.480Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.480Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.482Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.483Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.485Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.487Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.492Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.493Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.495Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.495Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.496Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.496Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.497Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.497Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.497Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.498Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.498Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.499Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.500Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.501Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.503Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.504Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.504Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.504Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:25:40.505Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:25:40.505Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.505Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.506Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.506Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.507Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.508Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.509Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.510Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T11:25:40.522Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.511Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.511Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.512Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.512Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.512Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:25:40.512Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T11:25:40.521Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T11:25:40.522Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T11:29:18.788Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T11:29:18.788Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:29:18.789Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T11:29:18.790Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T11:29:18.791Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T11:29:18.791Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:29:18.792Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T11:29:18.792Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T11:29:18.793Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:29:18.793Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T11:29:18.793Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T11:29:19.580Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T11:29:19.581Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:29:19.581Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T11:29:19.582Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:29:19.582Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:29:19.583Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:29:19.587Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:29:19.587Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T11:29:19.632Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T11:29:19.657Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T11:29:19.658Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T11:29:19.658Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:29:19.700Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:29:19.700Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.701Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.701Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.702Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.702Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.703Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.703Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.703Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.704Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.704Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.704Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.704Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.705Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.705Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.705Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.706Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.706Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.707Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.707Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.708Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.708Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.708Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.709Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.709Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.709Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.710Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.711Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.712Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.713Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.714Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.715Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.715Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.716Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.716Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.716Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.717Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.717Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.717Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:29:19.718Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:29:19.718Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.719Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.720Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.721Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.722Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.722Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.723Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.723Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.723Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.724Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.728Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.729Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T11:29:19.742Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.730Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:29:19.730Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T11:29:19.742Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T11:29:19.742Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T11:32:43.689Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T11:32:43.696Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:32:43.701Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T11:32:43.702Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T11:32:43.709Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T11:32:43.712Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:32:43.714Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T11:32:43.715Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T11:32:43.722Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:32:43.717Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T11:32:43.720Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T11:32:44.250Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T11:32:44.251Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:32:44.254Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T11:32:44.255Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:32:44.255Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:32:44.256Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:32:44.262Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:32:44.263Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T11:32:44.291Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T11:32:44.291Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T11:32:44.292Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T11:32:44.293Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:32:44.332Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:32:44.332Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.333Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.334Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.334Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.334Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.335Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.335Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.336Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.336Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.337Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.338Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.339Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.339Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.340Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.340Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.340Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.341Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.341Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.342Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.342Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.343Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.343Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.343Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.344Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.344Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.345Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.345Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.346Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.347Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.347Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.348Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.348Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.348Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.349Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.349Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.349Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.350Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.350Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:32:44.351Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:32:44.351Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.352Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.353Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.356Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T11:32:44.372Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.357Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.358Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.358Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.359Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.359Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.359Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.360Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.360Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.361Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:32:44.361Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T11:32:44.371Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T11:32:44.372Z"}
{"level":"info","message":"Received request for filter options","timestamp":"2024-10-04T11:35:11.142Z"}
{"level":"debug","message":"Fetching filter options","timestamp":"2024-10-04T11:35:11.146Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:35:11.150Z"}
{"level":"debug","message":"Executing query","sql":"SELECT depId as id, depName as name FROM departments","timestamp":"2024-10-04T11:35:11.152Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":4,"timestamp":"2024-10-04T11:35:11.158Z"}
{"level":"debug","message":"Executing query","sql":"SELECT siteId as id, siteName as name FROM sites","timestamp":"2024-10-04T11:35:11.159Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:35:11.161Z"}
{"level":"debug","message":"Executing query","sql":"SELECT NationalityID as id, NationalityName as name FROM nationalities","timestamp":"2024-10-04T11:35:11.164Z","values":[]}
{"level":"debug","message":"Successfully retrieved filter options","options":{"departments":[{"id":1,"name":"first_dep"},{"id":2,"name":"second dep"},{"id":3,"name":"third_dep"},{"id":4,"name":"fourth_dep"}],"nationalities":[{"id":1,"name":"Local"},{"id":2,"name":"Expat"}],"sites":[{"id":1,"name":"first"},{"id":2,"name":"second"}]},"timestamp":"2024-10-04T11:35:11.170Z"}
{"level":"debug","message":"Query executed successfully","rowCount":2,"timestamp":"2024-10-04T11:35:11.167Z"}
{"departmentCount":4,"level":"info","message":"Filter options retrieved successfully","nationalityCount":2,"siteCount":2,"timestamp":"2024-10-04T11:35:11.169Z"}
{"level":"info","message":"Received attendance report request","query":{},"timestamp":"2024-10-04T11:35:11.479Z"}
{"filters":{},"level":"debug","message":"Processing report with filters","timestamp":"2024-10-04T11:35:11.482Z"}
{"level":"debug","message":"Database connection acquired","timestamp":"2024-10-04T11:35:11.485Z"}
{"filters":{},"level":"debug","message":"Building attendance report query with filters","timestamp":"2024-10-04T11:35:11.486Z"}
{"level":"debug","message":"Executing main query","parameters":[],"query":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:35:11.486Z"}
{"level":"debug","message":"Executing query","sql":"\n          SELECT DISTINCT \n              i.*,\n              e.EmpID, e.EmpFName, e.EmpLName, e.IsLive, e.EmployeeGradeID,\n              e.NationalityID, e.EmailID, e.ShiftId, e.depId, e.jobTitle,\n              s.Shift_id, s.shift_name, s.shift_type, s.shift_start, s.shift_end,\n              s.hours_allowed_for_break, s.time_allowed_before_shift,\n              s.shift_incharge, s.total_working_hours_before, s.lgt_in_minutes,\n              d.depId, d.depName, d.section_Id,\n              sec.sectionId, sec.sectionName, sec.site_Id,\n              st.siteId, st.siteName, j.jobTitleId, j.jobTitleName, g.gradeId, g.gradeName\n          FROM input_data i\n          JOIN employee_master e ON i.empid = e.EmpID\n          JOIN shift s ON e.ShiftId = s.Shift_id\n          JOIN departments d ON e.depId = d.depId\n          JOIN section sec ON d.section_Id = sec.sectionId\n          JOIN sites st ON sec.site_Id = st.siteId\n          JOIN jobtitle j ON e.jobTitle = j.jobTitleId\n          JOIN grade g ON e.EmployeeGradeID = g.gradeId\n      ","timestamp":"2024-10-04T11:35:11.487Z","values":[]}
{"level":"debug","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:35:11.493Z"}
{"level":"info","message":"Query executed successfully","rowCount":13,"timestamp":"2024-10-04T11:35:11.494Z"}
{"level":"debug","message":"Starting attendance data processing","resultCount":13,"timestamp":"2024-10-04T11:35:11.539Z"}
{"level":"debug","message":"Input data before grouping","sampleRecord":{"EmailID":"boom@pow.com","EmpFName":"bob","EmpID":1,"EmpLName":"the builder","EmployeeGradeID":1,"IsLive":1,"NationalityID":1,"ShiftId":1,"Shift_id":1,"clock_in":"06:42:22","clock_out":"09:48:27","date":"2024-09-25T20:00:00.000Z","depId":1,"depName":"first_dep","empid":1,"gradeId":1,"gradeName":"Staff","hours_allowed_for_break":1,"jobTitle":1,"jobTitleId":1,"jobTitleName":"engineer","lgt_in_minutes":0,"sectionId":1,"sectionName":"fisrt_section","section_Id":1,"shift_end":"16:30:00","shift_incharge":1,"shift_name":"F1- worker","shift_start":"07:30:00","shift_type":"same day","siteId":1,"siteName":"first","site_Id":1,"time_allowed_before_shift":0,"total_working_hours_before":8},"timestamp":"2024-10-04T11:35:11.540Z","totalRecords":13}
{"inputDataLength":13,"level":"debug","message":"Starting groupByEmployeeAndDate","timestamp":"2024-10-04T11:35:11.542Z"}
{"employeeCount":7,"level":"debug","message":"Grouping completed","timestamp":"2024-10-04T11:35:11.543Z"}
{"level":"info","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:35:11.601Z"}
{"level":"debug","message":"Data processing completed","processedRecords":13,"timestamp":"2024-10-04T11:35:11.601Z"}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.603Z","values":[1,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.605Z","values":[1,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.606Z","values":[1,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.606Z","values":[1,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.607Z","values":[2,"2024-09-26"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.607Z","values":[2,"2024-09-27"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.607Z","values":[3,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.607Z","values":[4,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.608Z","values":[5,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.608Z","values":[5,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.608Z","values":[6,"2024-10-03"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.608Z","values":[7,"2024-10-01"]}
{"level":"debug","message":"Executing query","sql":"SELECT * FROM general_attendance_report WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.609Z","values":[7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.609Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.609Z","values":[{"awh":"2.06","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"06:42:22","last_out":"09:48:27","leave_id":11,"ot":"0.00","shift_date":"2024-09-26","status":"P"},1,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.610Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.610Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"19:59:54","last_out":"20:00:58","leave_id":11,"ot":"0:00","shift_date":"2024-09-27","status":"A"},1,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.611Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.611Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"15:03:16","last_out":"15:06:39","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},1,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.612Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.612Z","values":[{"awh":"0.00","emp_fname":"bob","emp_id":1,"emp_lname":"the builder","first_in":"12:13:48","last_out":"12:13:50","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},1,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.613Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.613Z","values":[{"awh":"6.01","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"11:47:10","last_out":"18:48:02","leave_id":11,"ot":"0:00","shift_date":"2024-09-26","status":"A"},2,"2024-09-26"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.614Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.614Z","values":[{"awh":"12.30","emp_fname":"nicole","emp_id":2,"emp_lname":"brown","first_in":"05:57:59","last_out":"19:28:11","leave_id":11,"ot":"1.28","shift_date":"2024-09-27","status":"P"},2,"2024-09-27"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.615Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.615Z","values":[{"awh":"1.31","emp_fname":"Ross","emp_id":3,"emp_lname":"Taylor","first_in":"09:00:00","last_out":"11:31:22","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"P"},3,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.618Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.619Z","values":[{"awh":"11.00","emp_fname":"Giga","emp_id":4,"emp_lname":"Chad","first_in":"08:56:38","last_out":"20:56:41","leave_id":11,"ot":"2:00","shift_date":"2024-10-01","status":"P"},4,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.620Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.622Z","values":[{"awh":"0.23","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"10:39:36","last_out":"12:02:21","leave_id":11,"ot":"0:00","shift_date":"2024-10-01","status":"A"},5,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.624Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.625Z","values":[{"awh":"NaN","emp_fname":"Might","emp_id":5,"emp_lname":"Guy","first_in":"11:58:55","last_out":"Invalid date","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},5,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.626Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.626Z","values":[{"awh":"5.44","emp_fname":"cristano","emp_id":6,"emp_lname":"ronaldo","first_in":"05:29:48","last_out":"12:13:38","leave_id":11,"ot":"0.00","shift_date":"2024-10-03","status":"P"},6,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.626Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.627Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"15:03:16","last_out":"00:00:00","leave_id":11,"ot":"0.00","shift_date":"2024-10-01","status":"MS"},7,"2024-10-01"]}
{"level":"debug","message":"Query executed successfully","rowCount":1,"timestamp":"2024-10-04T11:35:11.627Z"}
{"level":"debug","message":"Executing query","sql":"UPDATE general_attendance_report SET ? WHERE emp_id = ? AND shift_date = ?","timestamp":"2024-10-04T11:35:11.628Z","values":[{"awh":"0.00","emp_fname":"leo","emp_id":7,"emp_lname":"messi","first_in":"12:08:14","last_out":"12:08:24","leave_id":11,"ot":"0:00","shift_date":"2024-10-03","status":"A"},7,"2024-10-03"]}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.628Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.629Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.630Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.631Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.631Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.632Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.635Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.636Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.637Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.639Z"}
{"level":"info","message":"Successfully generated report","recordCount":3,"timestamp":"2024-10-04T11:35:11.651Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.639Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.640Z"}
{"level":"debug","message":"Query executed successfully","timestamp":"2024-10-04T11:35:11.640Z"}
{"level":"info","message":"Report generation completed","reportSize":3,"timestamp":"2024-10-04T11:35:11.649Z"}
{"level":"debug","message":"Releasing database connection","timestamp":"2024-10-04T11:35:11.651Z"}
